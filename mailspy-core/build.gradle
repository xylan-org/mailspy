plugins {
	id "java-library"
}

description = "MailSpy :: Core"
sourceCompatibility = "${sourceCompatibility}"

configurations {
	frontend
    testImplementation.extendsFrom compileOnly
}

dependencies {
    frontend project(":mailspy-frontend")

    implementation "org.slf4j:slf4j-api"
    implementation "org.subethamail:subethasmtp"
    implementation "commons-io:commons-io"

    compileOnly "org.springframework.boot:spring-boot-autoconfigure"
    compileOnly "org.springframework:spring-context-support"
    compileOnly "org.springframework:spring-webmvc"
    compileOnly "org.springframework.security:spring-security-config"
    compileOnly "org.springframework.security:spring-security-web"
    compileOnly "jakarta.servlet:jakarta.servlet-api"
    compileOnly "jakarta.validation:jakarta.validation-api"
    compileOnly "jakarta.annotation:jakarta.annotation-api"
    compileOnly "org.projectlombok:lombok"

    testImplementation "org.testng:testng"
    testImplementation "org.mockito:mockito-core"
    testImplementation "org.mockito:mockito-testng"
    testCompileOnly "org.projectlombok:lombok"

    annotationProcessor "org.projectlombok:lombok"
    testAnnotationProcessor "org.projectlombok:lombok"
}

jar {
    dependsOn ":mailspy-frontend:assemble"
    from (configurations.frontend.files) {
        into "META-INF/mailspy-frontend"
    }
}

test {
    useTestNG()
}
